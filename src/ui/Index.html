<!DOCTYPE html>
<html lang="en">
<head>
  <base target="_top">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <title>Food Label Creator</title>

  <!-- Kiosk styles -->
  <?!= include('ui/css.kiosk'); ?>

  <!-- Neutralize AMD/CommonJS so the SDK attaches to window -->
  <script>
    (function(){
      window.__amd_backup__ = { define: window.define, module: window.module, exports: window.exports };
      try { window.define = void 0; window.module = void 0; window.exports = void 0; } catch (e) {}
    })();
  </script>

  <!-- INLINE Scandit bundled JS so window.Scandit exists immediately -->
  <script><?!= scanditInline() ?></script>

  <!-- Restore AMD/CommonJS if the host relied on them -->
  <script>
  (function(){
    // Restore AMD/CommonJS if the host relied on them
    var b = window.__amd_backup__ || {};
    if (b.define !== undefined)  window.define  = b.define;
    if (b.module !== undefined)  window.module  = b.module;
    if (b.exports !== undefined) window.exports = b.exports;

    // NEW: report what the inline helper said
    console.log('[INLINE] result:', window.__SCANDIT_INLINE_RESULT__ || null);
    console.log('[INDEX] inline bundle present?', !!window.Scandit);
  })();
</script>
</head>
<body>
  <main class="app">
    <header>
      <h1>Food Label Creator</h1>
      <p class="subtitle">
        Welcome to the Food Label Creator Application, provided by the SPCA Serving Erie County.
        Follow the steps below to search for or create pet food labels.
      </p>
    </header>

    <!-- Screen host + live region -->
    <div id="screen"></div>
    <div id="toast" class="msg" role="status" aria-live="polite"></div>
  </main>

  <!-- App scripts (order matters: scanner before app) -->
  <?!= include('ui/js.api'); ?>
  <?!= include('ui/js.scanner'); ?>
  <?!= include('ui/js.app'); ?>

  <!-- Views -->
  <?!= include('ui/view.launch'); ?>
  <?!= include('ui/view.results'); ?>
  <?!= include('ui/view.new'); ?>
  <?!= include('ui/view.review'); ?>
  <?!= include('ui/view.done'); ?>
</body>
</html>